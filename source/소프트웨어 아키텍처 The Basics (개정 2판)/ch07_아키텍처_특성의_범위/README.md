# ch07 아키텍처 특성의 범위

## 요약

본 문서는 소프트웨어 아키텍처의 특성을 정의하는 현대적인 접근 방식을 요약한다. 전통적인 프레임워크는 시스템 전체에 단일 **아키텍처 특성** 집합을 가정하는 치명적인 결함이 있었으나, **마이크로서비스**와 같은 현대 아키텍처는 서비스별로 상이한 특성을 요구한다. 이러한 문제를 해결하기 위해 **아키텍처 퀀텀(Architectural Quantum)** 이라는 새로운 개념이 도입되었다.

**아키텍처 퀀텀**은 독립적으로 실행될 수 있는 시스템의 가장 작은 단위로 정의되며, 높은 **기능적 응집도**, 독립적인 **배포 가능성**, 그리고 다른 퀀텀과의 **동기식 통신**이라는 핵심 속성을 가진다. 이 개념은 특정 운영 특성(성능, 탄력성 등)에 영향을 미치는 데이터베이스와 같은 외부 종속성을 포함하여 **아키텍처 범위**를 측정하는 유용한 척도를 제공한다.

아키텍처 퀀텀을 식별함으로써 아키텍트는 문제 도메인에 가장 적합한 **아키텍처 스타일**(모놀리식 또는 분산)을 결정하고, **서비스 경계**를 효과적으로 설정할 수 있다. "Going Green" 사례 연구는 서로 다른 비즈니스 요구사항(예: 확장성, 보안, 민첩성)이 어떻게 별개의 퀀텀으로 분리되어 최적의 시스템 설계를 이끌어내는지를 명확히 보여준다.

![아키텍처 특성의 범위 인포그래픽](unnamed.png)

---

## 1. 서론: 아키텍처 특성 범위의 진화

소프트웨어 아키텍트의 사고방식은 기술 생태계의 발전에 맞춰 진화해야 하며, 이는 **아키텍처 특성**을 정의하는 방식에서 가장 두드러지게 나타난다. 과거의 많은 프레임워크는 시스템 전체에 단일한 아키텍처 특성 집합을 가정하는 근본적인 결함을 가지고 있었다. 이는 오늘날 마이크로서비스와 같이 **서비스 수준**과 **시스템 수준**에서 서로 다른 아키텍처 특성을 갖는 현대적인 아키텍처에는 더 이상 유효하지 않은 접근법이다.

기존의 **코드 수준 측정 지표**들은 아키텍처의 구조적 측면을 분석하는 데 도움을 주지만, **범위**를 반영하지는 못한다. 이러한 지표들은 코드의 저수준 세부사항에 대한 통찰을 제공할 뿐, 데이터베이스와 같이 코드베이스 외부에 존재하며 **운영 특성**에 큰 영향을 미치는 종속 구성요소를 평가할 수 없다. 예를 들어, 아키텍트가 코드베이스를 아무리 성능이 뛰어나거나 탄력적으로 설계하더라도, 시스템의 데이터베이스가 이러한 특성을 지원하지 않는다면 그 노력은 수포로 돌아갈 것이다.

## 2. 아키텍처 퀀텀(Architectural Quantum)의 정의

기존의 척도들이 가진 한계를 극복하기 위해 **아키텍처 퀀텀**이라는 새로운 개념이 개발되었다. 물리학에서 '**퀀텀**'이 어떤 것(주로 에너지)의 가능한 가장 작은 양을 의미하는 것처럼, 아키텍처 퀀텀은 "**독립적으로 실행되는 시스템의 가장 작은 부분**"으로 정의된다. 이는 특정 아키텍처 특성 집합의 **범위**를 설정하는 경계 역할을 한다.

아키텍처 퀀텀은 다음과 같은 네 가지 주요 특성을 가진다.

1. **아키텍처의 다른 부분과 독립적으로 배포 가능**: 퀀텀은 다른 부분과 무관하게 독립적으로 작동하는 데 필요한 모든 구성요소를 포함한다. 예를 들어, 애플리케이션이 데이터베이스를 사용한다면 그 데이터베이스는 퀀텀의 일부이다. 이로 인해 단일 데이터베이스를 공유하는 레거시 시스템은 정의상 하나의 퀀텀을 형성한다. 반면, 각 서비스가 자체 데이터베이스를 갖는 마이크로서비스 아키텍처는 여러 개의 퀀텀을 가진다.
2. **높은 기능적 응집도**: **기능적 응집도**는 퀀텀이 의미 있는 작업을 수행함을 의미한다. 이는 **도메인 주도 설계(Domain-Driven Design, DDD)** 의 **제한된 컨텍스트(Bounded Context)** 개념과 밀접한 관련이 있다. 분산 아키텍처에서는 각 서비스가 단일 워크플로우에 맞춰 설계되어 높은 기능적 응집도를 갖는 경향이 있다.
3. **낮은 외부 구현의 정적 결합**: 아키텍처 퀀텀 간의 **결합도**는 낮아야 한다. 이는 구현 변경 시 예기치 않은 부작용이 다른 부분으로 전파되는 것을 막아 "깨지기 쉬운(brittle)" 아키텍처를 방지한다. 결합 범위가 넓을수록 **느슨한 결합**이 중요해진다.
4. **다른 퀀텀과의 동기식 통신**: 퀀텀은 **동기식 통신**을 통해 서로 연결될 때 동일한 퀀텀의 일부로 간주된다. 동기식 호출은 호출하는 서비스와 호출받는 서비스의 운영 특성(예: 확장성, 처리량)을 강하게 결합시킨다.

## 3. 결합도의 유형과 퀀텀

아키텍처 퀀텀의 정의를 명확히 이해하기 위해서는 다양한 **결합도 유형**을 구분해야 한다.

| 결합도 유형 | 설명 |
|-----------|------|
| **의미론적 결합 (Semantic Coupling)** | 해결하고자 하는 문제 도메인에 내재된 자연스러운 결합. 예를 들어, 주문 처리 시스템은 재고, 카탈로그, 고객 등의 개념들이 자연스럽게 연결된다. 도메인의 변경은 필연적으로 시스템 요구사항의 변경을 의미한다. |
| **구현 결합 (Implementation Coupling)** | 아키텍트와 팀이 특정 종속성을 구현하기로 결정하는 방식. 예를 들어, 단일 데이터베이스를 사용할지, 분산 아키텍처를 구축할지 등의 결정이 여기에 해당한다. |
| **정적 결합 (Static Coupling)** | 아키텍처의 "**배선(wiring)**", 즉 서비스들이 서로 어떻게 종속되는지를 나타낸다. 두 서비스가 동일한 결합점(예: 공유 데이터베이스, 공통 라이브러리)에 의존하면 동일한 퀀텀에 속한다. "하나를 변경하면 다른 것이 깨질 수 있을 때 두 요소는 결합되어 있다"는 간단한 규칙으로 생각할 수 있다. |
| **동적 결합 (Dynamic Coupling)** | 아키텍처 퀀텀들이 서로 통신해야 할 때 발생하는 **런타임 상호작용**. 분산 아키텍처에서 서비스 간 통신 시 발생하는 절충점을 고려해야 한다. |

## 4. 동기식 통신과 퀀텀 경계

퀀텀을 정의하는 가장 중요한 요소 중 하나는 **동기식 통신**이다. 분산 아키텍처에서 동기식 통신은 **운영 특성**을 강하게 결합시킨다.

예를 들어, 마이크로서비스 아키텍처에서 **Auction 서비스**가 경매 종료 시 **Payment 서비스**에 동기적으로 결제 정보를 보낸다고 가정하자. 만약 Payment 서비스가 초당 2건(500ms당 1건)의 결제만 처리할 수 있는데, 다수의 경매가 동시에 종료되어 요청이 폭주하면 Payment 서비스는 부하를 감당하지 못하고 호출이 실패하게 된다. 이는 Auction 서비스의 **확장성** 과 Payment 서비스의 확장성이 다르기 때문에 발생하며, 동기식 통신으로 인해 두 서비스의 **운영적 운명** 이 묶여버린 것이다.

반면, **비동기 통신**(예: 메시지 큐 사용)은 큐가 **버퍼** 역할을 하여 두 시스템의 운영 특성을 분리할 수 있다. 메시지 폭주가 발생하더라도 큐가 메시지를 보관하고 있다가 수신자가 준비될 때 처리하도록 할 수 있다. 따라서 비동기 통신은 퀀텀 간의 경계를 더 명확하게 분리하는 데 도움이 된다.

## 5. 아키텍처 스타일 결정을 위한 퀀텀 활용

아키텍처 퀀텀 개념은 **아키텍처 스타일**을 결정하는 데 유용한 **의사결정 프레임워크**를 제공한다.

### 5.1. 1단계: 아키텍처 특성 분석
* 시스템에 단일 특성 집합이 필요한지, 아니면 여러 특성 집합이 필요한지 분석한다.
* 단일 집합으로 충분한 경우: **모놀리식 아키텍처**를 고려할 수 있다.
* 여러 집합이 필요한 경우: **분산 아키텍처**가 더 적합하다.

### 5.2. 2단계: 퀀텀 경계 선택 (분산 아키텍처의 경우)
* 분산 아키텍처를 선택했다면, 적절한 **퀀텀 경계**를 정의해야 한다. 이때 필요한 아키텍처 특성들의 **군집**이 퀀텀 경계를 나누는 좋은 기준이 된다.

### 5.3. 3단계: 영속성 결정
* **모놀리식 아키텍처**: 일반적으로 단일 모놀리식 데이터베이스를 사용한다.
* **분산 아키텍처**: 단일 데이터베이스를 공유하거나(이벤트 기반 아키텍처에서 흔함), 서비스/퀀텀 단위로 데이터를 분할할 수 있다(마이크로서비스에서 흔함).

### 5.4. 4단계: 통신 스타일 결정 (분산 아키텍처의 경우)
* 퀀텀 간에 **동기식 통신**을 사용할지, **비동기식 통신**을 사용할지 결정한다. 동기식 통신은 정적 결합으로 정의된 퀀텀 경계를 변경시킬 수 있으므로 신중하게 고려해야 한다.

## 6. 사례 연구: "Going Green"

**"Going Green(GG)"** 이라는 중고 전자기기 재활용 및 재판매 기업의 사례를 통해 퀀텀 개념을 적용해 보자.

### 6.1. 비즈니스 프로세스
사용자는 키오스크나 웹사이트를 통해 기기 모델과 상태를 입력하여 견적을 받는다. 견적을 수락하면 기기를 발송하고, GG는 기기 평가 후 대금을 지급한다. 이후 기기는 재활용되거나 재판매된다.

### 6.2. 아키텍처 특성 분석
분석 결과, 다음과 같이 세 개의 뚜렷한 **특성 군집**이 형성되었다.

1. **고객 대면 기능** (견적, 상태 조회): **확장성(Scalability)**, **가용성(Availability)**, **민첩성(Agility)** 이 중요.
2. **전자기기 평가**: **유지보수성(Maintainability)**, **배포성(Deployability)**, **테스트용이성(Testability)** 이 중요. 새로운 기기 모델이 계속 출시되므로 평가 로직을 신속하게 업데이트해야 한다.
3. **재활용, 보고, 회계** (백오피스): **보안(Security)**, **데이터 무결성(Data Integrity)**, **감사추적성(Auditability)** 이 중요.

### 6.3. 퀀텀 분리 전략
이처럼 서로 상충되는 특성들(예: 빠른 배포성과 엄격한 감사추적성)을 단일 시스템으로 모두 만족시키는 것은 매우 어렵다. 따라서 각 특성 군집을 별도의 **아키텍처 퀀텀**으로 정의하는 것이 합리적인 접근이다. 이를 통해 각 퀀텀은 자신에게 가장 중요한 특성에 최적화된 설계를 가질 수 있다. 예를 들어, '**고객 대면**' 퀀텀은 자체 데이터베이스를 가지고 확장성에 집중하고, '**평가**' 퀀텀은 빠른 업데이트를 위해 독립적으로 배포되며, '**백오피스**' 퀀텀은 데이터 무결성과 보안을 위해 별도의 데이터베이스를 사용할 수 있다.

## 7. 클라우드 환경에서의 범위 설정

**클라우드 기반 리소스**는 많은 **운영 아키텍처 특성**을 캡슐화하기 때문에 범위 설정을 더욱 복잡하게 만든다. 아키텍트는 최소한 두 가지 시나리오를 고려해야 한다.

### 7.1. 컨테이너 호스팅으로서의 클라우드
개발팀이 클라우드를 대체 **데이터 센터**로 사용하여 컨테이너를 실행하는 경우, 아키텍트는 컨테이너의 아키텍처 특성과 **오케스트레이션 도구**(예: Kubernetes)의 제약을 모두 고려해야 한다.

### 7.2. 시스템 구성요소로서의 클라우드 리소스 활용
클라우드 제공업체의 구성요소(예: **서버리스 함수**, **관리형 데이터베이스** 등)를 조합하여 애플리케이션을 구축하는 경우, 아키텍트는 제공업체가 제공하고 유지보수하는 기능들을 평가하여 컨텍스트에 적합한 역량을 구축해야 한다.

### 7.3. 절충점의 진화
과거 아키텍트들이 물리적 시스템에서 힘들게 구현했던 **탄력성** 같은 기능들은 이제 클라우드에서 간단한 구성 설정이 되었다. 하지만 그 대가로 **공급업체 가용성**, **보안 문제** 증가와 같은 새로운 **절충점**이 생겨났다. 소프트웨어 아키텍처의 세부사항은 계속 변하지만, **절충점을 분석하는 핵심 과업**은 변하지 않는다.

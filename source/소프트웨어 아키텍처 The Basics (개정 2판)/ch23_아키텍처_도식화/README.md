아키텍처 다이어그램 브리핑

요약

본 브리핑 문서는 소프트웨어 아키텍트에게 다이어그램 작성이 단순한 기술적 표현을 넘어 핵심적인 커뮤니케이션 역량임을 강조한다. 아키텍트의 성공은 기술적 아이디어의 탁월함뿐만 아니라, 해당 아이디어를 경영진에게 설득하여 예산을 확보하고 개발팀이 실행하도록 만드는 능력에 달려 있다. 이를 위한 가장 중요한 도구가 바로 다이어그램이다.

문서의 핵심 내용은 다음과 같다:

1. 맥락과 일관성: 다이어그램은 항상 전체 아키텍처 내에서 특정 부분이 어떤 위치를 차지하는지 명확히 보여주어야 한다. 맥락 없이 세부 사항만 제시하면 보는 이에게 혼란을 초래한다.
2. 비이성적 산출물 애착 방지: 설계 초기 단계에 너무 많은 시간과 노력을 들여 고품질의 다이어그램을 만들면, 해당 산출물에 비이성적으로 집착하게 되어 필요한 변경에 저항하게 될 수 있다.
3. 초기 단계의 저충실도 접근법: 설계 초기에는 화이트보드나 태블릿을 활용한 임시적이고 가벼운 산출물을 통해 아이디어를 신속하게 구체화하고 수정하는 것이 효과적이다. 이는 애자일 원칙과도 부합한다.
4. 도구의 전략적 활용: 최신 다이어그램 도구의 기능(레이어, 템플릿 등)을 의미론적으로 활용하여 다이어그램의 정보 전달력을 극대화해야 한다.
5. 표준과 유연성: C4, ArchiMate와 같은 공식 표준은 일관된 커뮤니케이션에 유용하지만, 조직은 합리적인 예외를 허용하여 표현의 유연성을 보장해야 한다.
6. 명확성의 원칙: 다이어그램의 모든 요소(선, 도형, 색상 등)는 명확하고 일관된 의미를 전달해야 하며, 오해의 소지가 있는 다이어그램은 없는 것보다 해롭다.

1. 아키텍트에게 있어 다이어그램의 핵심 역할

1.1. 커뮤니케이션 도구로서의 중요성

소프트웨어 아키텍트의 업무는 기술적 전문성을 넘어서는 다양한 역량을 요구한다. 그중에서도 가장 결정적인 것은 효과적인 커뮤니케이션 능력이다. 아무리 뛰어난 기술적 아이디어를 가지고 있더라도, 경영진을 설득하여 자금을 지원받지 못하거나 개발팀이 이를 구현하도록 이끌지 못한다면 그 아이디어는 실현될 수 없다. 다이어그램 작성은 이러한 커뮤니케이션을 위한 핵심 기술이다.

1.2. 맥락과 표현의 일관성

아키텍처를 시각적으로 설명할 때 가장 중요한 원칙 중 하나는 표현의 일관성을 유지하는 것이다. 이는 특정 부분의 세부 사항을 설명하기 전에, 그것이 전체 시스템의 어디에 위치하는지 관계를 먼저 보여주는 것을 의미한다. 예를 들어, 'Silicon Sandwiches' 솔루션의 플러그인 구조를 상세히 설명하고자 한다면, 먼저 시스템의 전체 토폴로지를 보여주는 다이어그램으로 시작해야 한다. 그 후, 전체 토폴로지와 플러그인 구조 간의 관계를 명시하고 나서야 플러그인 자체의 세부 구조로 넘어가는 것이 바람직하다.

* 그림 23-1 예시: 이 다이어그램은 'Local'이라는 시스템이 'Recipes', 'Inventory', 'Promotion', 'Location' 등의 구성요소를 포함하고 데이터베이스와 연결됨을 보여준다. 이어서 'Recipes' 구성요소를 확대하여 내부의 'code' 요소들을 보여줌으로써, 전체적인 맥락 속에서 세부 사항을 이해할 수 있도록 돕는다.

이러한 접근법은 보는 이가 다이어그램의 범위를 명확히 이해하게 하여 혼란을 방지한다.

2. 다이어그램 작성 도구 및 방법론

아키텍처의 토폴로지, 즉 구조가 어떻게 맞물려 있는지를 보여주는 다이어그램은 아키텍트와 개발자 모두에게 중요하다. 이는 팀이 시스템에 대한 귀중한 공통의 이해를 형성하도록 돕는다.

2.1. 비이성적 산출물 애착 (Irrational Artifact Attachment)

'비이성적 산출물 애착'은 개인이 특정 산출물을 만드는 데 들인 시간에 비례하여 그 산출물에 비합리적으로 집착하게 되는 현상을 말한다. 만약 아키텍트가 Visio와 같은 도구를 사용하여 4시간 동안 아름다운 다이어그램을 만들었다면, 2시간만 투자했을 때보다 그 결과물에 훨씬 더 강하게 애착을 갖게 된다. 이로 인해 설계 변경에 대한 객관적인 판단력이 흐려질 수 있다.

2.2. 초기 단계의 저충실도 산출물

애자일 소프트웨어 개발 접근법은 불필요한 형식과 절차를 최소화하고 '적시에(just-in-time)' 산출물을 생성하는 것을 장려한다. 이러한 이유로 애자일 실무자들은 색인 카드나 포스트잇 같은 기술 수준이 낮은 도구를 선호한다. 이는 잘못된 것을 쉽게 버리고, 수정, 협업, 토론을 통해 산출물의 진정한 본질을 찾아가는 실험을 가능하게 한다.

* 전통적 방식: 화이트보드 다이어그램을 휴대폰으로 촬영하는 것.
* 현대적 방식: 태블릿을 오버헤드 프로젝터에 연결하여 사용. 태블릿은 다음과 같은 장점을 제공한다.
  1. 무한한 캔버스: 필요한 만큼 그림을 그릴 수 있다.
  2. 'What-if' 시나리오: 복사 및 붙여넣기로 원본을 훼손하지 않고 다양한 시나리오를 탐색할 수 있다.
  3. 디지털화: 화이트보드 사진의 빛 반사 문제 없이 이미지가 즉시 디지털화된다.
  4. 원격 협업: 원격 근무 환경에서의 협업이 훨씬 용이해진다.

설계가 충분히 검토된 후에 고품질의 다이어그램을 작성하는 것이 바람직하다.

2.3. 효과적인 다이어그램 도구의 기능

플랫폼과 관계없이 강력한 다이어그램 도구는 공통적으로 유용한 기능들을 제공한다. 다음은 주목할 만한 기능들이다.

* 레이어 (Layers): 레이어를 단순히 장식용이 아닌 의미론적으로 사용하는 것이 중요하다.
  * 기본 레이어: 아키텍처의 토폴로지(컨테이너, 데이터베이스, 의존성 등)를 표현한다. 구현 세부 사항보다는 아키텍처 자체에 집중한다.
  * 다음 레이어: 데이터베이스 종류, 통신 프로토콜 등 구현에 대한 세부 정보를 포함한다.
  * 이러한 방식은 다이어그램을 확장 가능하게 만들어, 도메인별 설계 경계나 트랜잭션 범위 같은 추가적인 메타 정보를 덧붙일 수 있게 한다.
* 스텐실/템플릿 (Stencils/Templates): 조직 내에서 공통으로 사용되는 패턴이나 아티팩트를 위한 시각적 구성요소 라이브러리를 만들 수 있다. 이는 모든 아키텍처 다이어그램의 일관성을 확보하고 새로운 다이어그램 작성 속도를 높여준다.
* 마그넷 (Magnets): 도형과 도형을 잇는 선이 특정 지점에 자동으로 맞춰지도록 하여 시각적 정렬을 돕는다.

3. 다이어그램 표준

소프트웨어 산업에는 여러 공식 다이어그램 표준이 존재한다. 그중 널리 사용되는 세 가지는 다음과 같다.

3.1. UML (Unified Modeling Language)

1980년대에 Grady Booch, Ivar Jacobson, Jim Rumbaugh가 각자의 설계 철학을 통합하기 위해 만들었다. 그러나 위원회에서 개발된 많은 표준처럼, 사용을 의무화한 조직 밖에서는 실패했다. 현재는 구조와 워크플로우를 전달하기 위한 클래스 다이어그램과 시퀀스 다이어그램만이 널리 사용되고 있다.

3.2. C4 모델

Simon Brown이 2006년에서 2011년 사이에 UML의 단점을 보완하고 현대화하기 위해 개발한 다이어그램 기법이다. C4는 다음의 4가지 'C'로 구성된다.

1. 컨텍스트 (Context): 사용자 역할, 외부 의존성을 포함한 시스템의 전체적인 맥락.
2. 컨테이너 (Container): 아키텍처 내의 물리적(때로는 논리적) 배포 경계 및 컨테이너. 운영팀과 아키텍트가 만나기 좋은 관점이다.
3. 컴포넌트 (Component): 시스템의 컴포넌트 관점. 아키텍트의 시각과 가장 유사하다.
4. 클래스 (Class): UML과 동일한 스타일의 클래스 다이어그램을 사용한다.

C4는 다이어그램 기법을 표준화하려는 기업에게 훌륭한 대안이며, 많은 다이어그램 도구가 C4 템플릿을 지원한다.

* 그림 23-2 예시: 'Silicon Sandwiches' 시스템의 C4 컴포넌트 다이어그램으로, 웹/모바일 앱과 상호작용하는 'Purchase', 'MakeOrder', 'Deliver' 등 다양한 컴포넌트 간의 관계를 보여준다.

3.3. ArchiMate

'Architecture'와 'Animate'의 합성어로, The Open Group이 개발한 오픈 소스 엔터프라이즈 아키텍처 모델링 언어이다. 비즈니스 영역 내외부의 아키텍처를 기술, 분석, 시각화하는 것을 목표로 한다. "가능한 한 작게"를 지향하는 경량 모델링 언어로, 아키텍트들 사이에서 인기가 높다.

4. 효과적인 다이어그램 작성을 위한 가이드라인

모든 아키텍트는 자신만의 다이어그램 스타일을 개발해야 한다. 다음은 기술 다이어그램 작성을 위한 일반적인 지침이다.

항목	가이드라인
제목 (Titles)	보는 사람에게 매우 익숙한 경우가 아니라면 모든 요소에 제목을 붙인다.
선 (Lines)	충분히 굵게 그려 잘 보이도록 한다. 정보 흐름을 나타낼 때는 화살표를 사용한다. 실선은 동기 통신, 점선은 비동기 통신을 나타내는 것이 일반적인 표준이다.
도형 (Shapes)	보편적인 표준은 없으나, 일반적으로 3D 상자는 배포 가능한 아티팩트, 직사각형은 컨테이너, 원통은 데이터베이스를 나타내는 데 사용된다. 조직 내에서 표준을 수립하는 것이 좋다.
레이블 (Labels)	모호함이 발생할 수 있는 모든 요소에 레이블을 붙여 명확히 한다.
색상 (Color)	요소를 구별하는 데 색상을 활용하되, 색맹 등 시각 장애가 있는 사람들을 고려해야 한다. 색상과 함께 고유한 기호 등을 병기하여 누구나 의미를 이해할 수 있도록 하는 것이 좋다. 그림 23-3은 회색 음영을 사용하여 서비스를 그룹화한 예시를 보여준다.
범례 (Keys)	도형의 의미가 모호할 경우, 각 도형이 무엇을 나타내는지 명확히 설명하는 범례를 추가한다. 쉽게 오해할 수 있는 다이어그램은 없는 것보다 나쁘다.

5. 결론 및 권장 사항

조직이 다이어그램 표준을 수립하는 것은 일관된 커뮤니케이션을 위해 유용하다. 그러나 표준이 특정 설계를 표현하기에 적합하지 않을 경우, 아키텍트가 규칙을 어기는 일은 빈번하다. 따라서 조직은 표준을 설정하되 합리적인 예외를 허용해야 한다.

과거의 중량급 CASE 도구 시대에는 간단한 것을 표현하기 위해 불필요한 세부 정보가 가득한 복잡한 모델을 만들어야 했다. 현대에는 경량 다이어그램 도구와 신속하게 만들 수 있는 산출물이 선호된다. 특히 설계 프로세스 초기에는 객관성을 잃지 않도록 자신의 창작물에 지나치게 애착을 갖지 않는 것이 중요하다.
